<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlockJump</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon1.ico">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.8.2/web3.min.js"></script>
    <script type="module" src="web3Integration.js"></script>
    <script type="module" src="achievements.js"></script>
    <script type="module" src="game.js"></script>
</head>
<body>
    <header>
        <div class="header-buttons"></div>
        <button id="walletConnectBtn" class="game-button connect-button">Connect wallet</button>
        <button id="buyTriesBtn" class="game-button" style="display: none;">Buy Tries</button>
        <div id="tryCounter" style="display: none;">Tries left: <span id="triesLeft">0</span></div>
    </header>

    <div class="main-content">
        <div id="gameWrapper">
            <div id="leftSidebar">
                <div id="highscoreSection">
                    <h2 class="section-title">Highscores</h2>
                    <table id="highscoreTable">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Name</th>
                                <th>Address</th>
                                <th>Tezos Price</th>
                                <th>Blocks</th>
                            </tr>
                        </thead>
                        <tbody id="highscoreBody"></tbody>
                    </table>
                    <div class="jackpot-info">
                        <h3>1st place can claim the Jackpot</h3>
                        <p id="contract-balance">Contract Balance: Loading...</p>
                    </div>
                    <button id="claimPrizeBtn" class="game-button" style="display: none;">Claim Prize</button>
                    <form id="nameForm" style="display: none;">
                        <input type="text" id="nameInput" placeholder="Enter your name" maxlength="10" required>
                        <button type="submit" id="submitScore">Submit Score</button>
                    </form>
                </div>
            </div>
            <div id="gameContainer">
                <img id="gameLogo" src="https://raw.githubusercontent.com/Blindripper/blockjump/main/pics/Logo.png" alt="Game Logo">
                <div id="powerupBar"></div>
                <div id="powerupTimers"></div>
                <div id="canvasContainer">
                    <canvas id="gameCanvas" width="800" height="600"></canvas>
                    <div id="achievementPopup"></div>
                    <div id="windIndicator"></div>
                </div>
            </div>
        </div>
        <div id="achievementsSection">
            <h2 class="section-title">Achievements</h2>
            <div id="achievementsList"></div>
        </div>
    </div>

    <button id="infoButton" class="info-button">?</button>

    <div id="infoModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Game Mechanics</h2>
            <section>
                <h3>Core Gameplay</h3>
                <p>
                    BlockJump is an exciting vertical platformer where you control a Tezos logo, climbing ever higher through a series of platforms. Your goal is to reach the highest score possible by climbing blocks and collecting powerups. The game becomes progressively harder as you climb higher, with more obstacles and enemies to overcome.
                </p>
                <p>
                    - Use the arrow keys to move left and right<br>
                    - Press the up arrow to jump<br>
                    - Press space to shoot at enemies<br>
                    - Avoid falling off the bottom of the screen<br>
                    - Collect powerups to enhance your abilities
                </p>
                <img src="https://raw.githubusercontent.com/Blindripper/blockjump/main/pics/TezosLogo_Icon_Bluesmall.png" alt="Player Character" style="width: 35px; height: 45px;">
            </section>
    
            <section>
                <h3>Platforms</h3>
                <p>
                    There are three types of platforms in the game:
                </p>
                <ul>
                    <li>Normal Platforms: Safe to land on</li>
                    <li>Golden Platforms: Gives you an extra boost when jumped from</li>
                    <li>Spike Platforms: Dangerous! Avoid these at all costs</li>
                </ul>
                <img src="https://raw.githubusercontent.com/Blindripper/blockjump/main/pics/normalplat0.png" alt="Normal Platform" style="width: 100px;">
                <img src="https://raw.githubusercontent.com/Blindripper/blockjump/main/pics/jumppad.png" alt="Golden Platform" style="width: 100px;">
                <img src="https://raw.githubusercontent.com/Blindripper/blockjump/main/pics/spikeplat1.png" alt="Spike Platform" style="width: 100px;">
            </section>
    
            <section>
                <h3>Powerups</h3>
                <p>
                    Collect these powerups to gain temporary advantages:
                </p>
                <ul>
                    <li><img src="https://raw.githubusercontent.com/Blindripper/blockjump/main/pics/bitcoin.png" alt="Shield" style="width: 30px;"> Shield: Protects you</li>
                    <li><img src="https://raw.githubusercontent.com/Blindripper/blockjump/main/pics/greenTezos.png" alt="Rapid Fire" style="width: 30px;"> Rapid Fire: Shoot faster</li>
                    <li><img src="https://raw.githubusercontent.com/Blindripper/blockjump/main/pics/Etherlink.png" alt="Constant Beam" style="width: 30px;"> Constant Beam: Shoot a continuous laser</li>
                    <li><img src="https://raw.githubusercontent.com/Blindripper/blockjump/main/pics/slowMotion.png" alt="Low Gravity" style="width: 30px;"> Low Gravity: Jump higher</li>
                    <li><img src="https://raw.githubusercontent.com/Blindripper/blockjump/main/pics/TezosX1.png" alt="Clear Screen" style="width: 30px;"> Clear Screen: Removes all enemies and debuffs</li>
                    <li><img src="https://raw.githubusercontent.com/Blindripper/blockjump/main/pics/nomadic.png" alt="Nomadic" style="width: 30px;"> Nomadic: Upgrades your weapon permanently</li>
                </ul>
                <p>
                    Watch out for debuffs that can hinder your progress!
                </p>
            </section>
    
            <section>
                <h3>Jackpot System</h3>
                <p>
                    The game features an exciting jackpot system:
                </p>
                <ul>
                    <li>The player with the highest score is ranked first on the leaderboard</li>
                    <li>The first-place player can claim the jackpot at any time</li>
                    <li>Once claimed, the jackpot resets, and a new climbing session begins</li>
                    <li>Stay vigilant! Other players can overtake your score and claim the jackpot before you</li>
                </ul>
                <p>
                    <strong>Remember:</strong> You must be in first place to claim the jackpot. If you're overthrown, you'll lose your chance until you reclaim the top spot!
                </p>
            </section>
    
            <section>
                <h3>Achievements</h3>
                <p>
                    Unlock special achievements as you play:
                </p>
                <ul>
                    <li>666 Climber: End the game with exactly 666 blocks climbed</li>
                    <li>Power Collector: Collect 100 powerups in a single run</li>
                    <li>High Climber: Climb 1000 or more blocks in one game</li>
                    <li>Paris Explorer: Reach the Paris background (Score 15,000+)</li>
                    <li>Pro Gamer: Achieve a score of 100,000 or higher</li>
                </ul>
                <p>
                    Each achievement can be minted as an NFT, providing a permanent record of your gaming prowess on the blockchain!
                </p>
            </section>
        </div>
    </div>
    <a href="https://github.com/Blindripper/blockjump" target="_blank" id="githubLink" class="github-link">
        <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="32" height="32">
    </a>
    <button id="soundToggle" class="sound-toggle">ðŸ”Š</button>
    
    
    <script>
        // Modal functionality
        var modal = document.getElementById("infoModal");
        var btn = document.getElementById("infoButton");
        var span = document.getElementsByClassName("close")[0];

        btn.onclick = function() {
            modal.style.display = "block";
        }

        span.onclick = function() {
            modal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>
</html>
