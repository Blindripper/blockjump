<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlockJump</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon1.ico">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.8.2/web3.min.js"></script>
</head>
<body>
    <header>
        <div class="header-buttons"></div>
        <button id="walletConnectBtn" class="game-button connect-button">Connect wallet</button>
        <button id="buyTriesBtn" class="game-button" style="display: none;">Buy Tries</button>
        <div id="tryCounter" style="display: none;">Tries left: <span id="triesLeft">0</span></div>
    </header>

    <div class="main-content">
        <div id="gameWrapper">
            <div id="leftSidebar">
                <div id="highscoreSection">
                    <h2 class="section-title">Highscores</h2>
                    <table id="highscoreTable">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Name</th>
                                <th>Address</th>
                                <th>Tezos Price</th>
                                <th>Blocks</th>
                            </tr>
                        </thead>
                        <tbody id="highscoreBody"></tbody>
                    </table>
                    <div class="jackpot-info">
                        <h3>1st can claim the Jackpot</h3>
                        <p id="contract-balance">Contract Balance: Loading...</p>
                    </div>
                    <button id="claimPrizeBtn" class="game-button" style="display: none;">Claim Prize</button>
                    <form id="nameForm" style="display: none;">
                        <input type="text" id="nameInput" placeholder="Enter your name" maxlength="10" required>
                        <button type="submit" id="submitScore">Submit Score</button>
                    </form>
                </div>
            </div>
            <div id="gameContainer">
                <img id="gameLogo" src="https://raw.githubusercontent.com/Blindripper/blockjump/main/pics/Logo.png" alt="Game Logo">
                <div id="powerupBar"></div>
                <div id="powerupTimers"></div>
                <div id="canvasContainer">
                    <canvas id="gameCanvas"></canvas>
                    <div id="gameInfo">
                        <div id="tryCounter">Tries Remaining: <span id="triesLeft">0</span></div>
                        <div id="blockCounter">Blocks Climbed: 0</div>
                        <div id="floorCounter">Tezos Price: 0000000</div>
                    </div>
                    <div id="achievementPopup"></div>
                    <div id="windIndicator"></div>
                </div>
            </div>
        </div>
        <div id="achievementsSection">
            <h2 class="section-title">Achievements</h2>
            <div id="achievementsList"></div>
        </div>
    </div>

    <button id="infoButton" class="info-button">?</button>

    <div id="infoModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Game Mechanics</h2>
            <p>
                <!-- Add your game mechanics explanation here -->
            </p>
        </div>
    </div>

    <button id="soundToggle" class="sound-toggle">ðŸ”Š</button>

    <script type="module" src="achievements.js"></script>
    <script type="module" src="game.js"></script>
    <script type="module" src="web3Integration.js"></script>
    <script>
        // Modal functionality
        var modal = document.getElementById("infoModal");
        var btn = document.getElementById("infoButton");
        var span = document.getElementsByClassName("close")[0];

        btn.onclick = function() {
            modal.style.display = "block";
        }

        span.onclick = function() {
            modal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>
</html>
